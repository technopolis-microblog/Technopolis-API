openapi: 3.0.0
info:
  title: technopolis
  version: 1.0.0
  license:
    name: GNU Free Documentation License Version 1.3
    url: 'https://www.gnu.org/licenses/fdl-1.3.txt'
servers:
  - url: 'http://technopolis.example/api/v1'
paths:
  /apps:
    post:
      summary: Create an application アプリケーションの作成
      operationId: post-apps
      description: |-
        Create new application to obtain OAuth2 credentials.

        OAuth2資格を取得するためのアプリケーションを作成します。
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                client_name:
                  type: string
                redirect_uris:
                  type: string
                scopes:
                  type: string
                website:
                  type: string
              required:
                - client_name
                - redirect_uris
            examples: {}
          application/json:
            schema:
              type: object
              properties:
                clientName:
                  type: string
                redirectURIs:
                  type: string
                scopes:
                  type: string
                website:
                  type: string
              required:
                - clientName
                - redirectURIs
            examples: {}
        description: ''
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  name:
                    type: string
                  website:
                    type: string
                  redirect_uris:
                    type: string
                  client_id:
                    type: string
                  client_secret:
                    type: string
              examples:
                example:
                  value:
                    id: 1043b2e7-a225-467c-9995-73eb33ae6f1e
                    name: Example of the application
                    website: null
                    redirect_uri: 'urn:ietf:wg:oauth:2.0:oob'
                    client_id: EXAMPLE OF CLIENT ID
                    client_secret: EXAMPLE OF CLIENT SECRET
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
              examples:
                example:
                  value:
                    error: 'Validation failed: Redirect URI must be an absolute URI.'
  /apps/verify_credentials:
    get:
      summary: Verify your app works アプリケーションの動作確認
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                  website:
                    type: string
              examples:
                example:
                  value:
                    name: Example of application
                    website: null
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
              examples:
                example:
                  value:
                    error: The access token is invalid
      operationId: get-apps-verify_credentials
      description: |-
        Confirm that the app's OAuth2 credentials work.

        アプリケーションのOAuth2認証情報が正しく機能することを確認します。
      parameters:
        - schema:
            type: string
            example: 'Bearer <OAuth2 token>'
            pattern: ''
          in: header
          name: Authorization
          required: true
          description: 'Bearer <OAuth2 token here>'
components:
  schemas: {}
  securitySchemes: {}
